<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Joe Thomas</title>
    <style>
      body {
        /* display: flex; */
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin-left: 25%;
        margin-right: 25%;
        font-family: Arial, sans-serif;
        background-color: #f0f0f0;
      }
      /* Tablet and up */
      @media (max-width: 1024px) {
        body {
          margin-left: 8%;
          margin-right: 8%;
        }
      }
      h1 {
        margin-top: 5%;
        font-size: x-large;
      }

      /* Notes section styles */
      .notes-section {
        margin-top: 40px;
        padding: 20px;
        background-color: rgb(227, 227, 227);
        border-radius: 8px;
      }

      .button-container {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
      }

      .add-row-btn {
        background-color: #718eac;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        font-size: 14px;
        cursor: pointer;
      }

      .add-row-btn:hover {
        background-color: #4171a4;
      }

      .clear-all-btn {
        background-color: #b58e92;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        font-size: 14px;
        cursor: pointer;
      }

      .clear-all-btn:hover {
        background-color: #b35760;
      }

      .text-row {
        margin-bottom: 15px;
        display: flex;
        align-items: flex-start;
        gap: 10px;
      }

      .checkbox-container {
        padding-top: 18px;
      }

      .checkbox {
        width: 20px;
        height: 20px;
        cursor: pointer;
        accent-color: rgb(119, 125, 171);
      }
      .checkbox:checked {
        opacity: 0.5;
      }

      .text-box {
        flex: 1;
        padding: 12px;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-family: Arial, sans-serif;
        font-size: 14px;
        box-sizing: border-box;
        resize: vertical;
        min-height: 40px;
      }

      .text-box:focus {
        outline: none;
        border-color: #6b8096;
      }

      .text-box.completed {
        /* text-decoration: line-through; */
        opacity: 0.4;
      }

      .delete-btn {
        /* background-color: #b6babf; */
        background: rgb(208, 206, 206);
        color: white;
        padding: 6px 6px;
        border: none;
        border-radius: 5px;
        font-size: 14px;
        cursor: pointer;
        white-space: nowrap;
      }

      .delete-btn:hover {
        background-color: #abaaaa;
      }
    </style>
  </head>
  <body>
    <h1 id="date-header"></h1>
    <p>Hello, my name is Joe.</p>
    <p>
      I have been working in the software industry for six years. My experience
      is primarily in infrastructure, tooling, CICD, monitoring, and incident
      response. I have also written backend applications, built UIs, and worked
      with relational databases through work and personal projects. The aspects
      of my work I enjoy the most are debugging outages and development blocking
      issues. I like working across the software stack and ensuring systems are
      both functional and useful to end-users. I am a strong believer in doing
      things in a 'simple as possible' way that others can understand - if
      something does not make sense to a coworker or end-user, I find there is
      usually a better approach to take.
    </p>
    <p></p>
    <p>
      At the most basic level, I am passionate about building and supporting
      software that creates meaningful impact - applications that solve real
      problems and make people's lives more productive or enjoyable.
    </p>

    <!-- Notes Section -->
    <div class="notes-section">
      <h2>Day Objectives</h2>
      <div class="button-container">
        <button class="add-row-btn" onclick="addNewRow('short')">+ Add Row</button>
        <button class="clear-all-btn" onclick="clearAll('short')">Clear All</button>
      </div>
      <div id="notes-container-short">
        <div class="text-row">
          <div class="checkbox-container">
            <input
              type="checkbox"
              class="checkbox"
              onchange="toggleComplete(this, 'short')"
            />
          </div>
          <textarea
            class="text-box"
            placeholder="Type your objective here..."
            onchange="saveNotes('short')"
          ></textarea>
          <button class="delete-btn" onclick="deleteRow(this, 'short')">Delete</button>
        </div>
      </div>
    </div>

    <script>
      // Get current date
      const now = new Date();
      const formattedDate = now.toLocaleDateString("en-US", {
        year: "numeric",
        month: "long",
        day: "numeric",
      });

      // Set the date header
      document.getElementById("date-header").textContent = formattedDate;

      // Notes functionality
      function addNewRow(noteSection) {
        const container = document.getElementById(`notes-container-${noteSection}`);
        const newRow = document.createElement("div");
        newRow.className = "text-row";
        newRow.innerHTML = `
          <div class="checkbox-container">
            <input type="checkbox" class="checkbox" onchange="toggleComplete(this, '${noteSection}')">
          </div>
          <textarea class="text-box" placeholder="Type your objective here..." onchange="saveNotes('${noteSection}')"></textarea>
          <button class="delete-btn" onclick="deleteRow(this, '${noteSection}')">Delete</button>
        `;
        container.insertBefore(newRow, container.firstChild);
        saveNotes(noteSection);
      }

      function deleteRow(button, noteSection) {
        const row = button.closest(".text-row");
        row.remove();
        saveNotes(noteSection);
      }

      function clearAll(noteSection) {
        if (confirm("Are you sure you want to clear all objectives?")) {
          const container = document.getElementById(`notes-container-${noteSection}`);
          container.innerHTML = `
            <div class="text-row">
              <div class="checkbox-container">
                <input type="checkbox" class="checkbox" onchange="toggleComplete(this, '${noteSection}')">
              </div>
              <textarea class="text-box" placeholder="Type your objective here..." onchange="saveNotes('${noteSection}')"></textarea>
              <button class="delete-btn" onclick="deleteRow(this, '${noteSection}')">Delete</button>
            </div>
          `;
          saveNotes(noteSection);
        }
      }

      function toggleComplete(checkbox, noteSection) {

        const row = checkbox.closest(".text-row");
        const textBox = row.querySelector(".text-box");
        const container = document.getElementById(`notes-container-${noteSection}`);

        if (checkbox.checked) {
          textBox.classList.add("completed");
          // Move row to bottom
        //   container.appendChild(row);
        } else {
          textBox.classList.remove("completed");
          // Move row back to top (before first completed item)
        //   container.appendChild(row);
        }

        saveNotes(noteSection);
      }

      function saveNotes(noteSection) {
        const container = document.getElementById(`notes-container-${noteSection}`);
        const rows = container.querySelectorAll(".text-row");
        const notes = [];

        rows.forEach((row) => {
          const checkbox = row.querySelector(".checkbox");
          const textBox = row.querySelector(".text-box");
          notes.push({
            text: textBox.value,
            completed: checkbox.checked,
            completedDate: formattedDate,
          });
        });

        localStorage.setItem(`${noteSection}-userNotes`, JSON.stringify(notes));
      }

      function loadNotes(noteSection) {
        const savedNotes = localStorage.getItem(`${noteSection}-userNotes`);

        if (savedNotes) {
          const notes = JSON.parse(savedNotes);
          const container = document.getElementById(`notes-container-${noteSection}`);

          // Clear existing boxes
          container.innerHTML = "";

          // Recreate boxes with saved content
          notes.forEach((note) => {
            const newRow = document.createElement("div");
            newRow.className = "text-row";

            if (noteSection == "recurring" && note.completedDate != formattedDate) {
              note.completed = false
            }

            const completedClass = note.completed ? "completed" : "";
            const checkedAttr = note.completed ? "checked" : "";

            newRow.innerHTML = `
              <div class="checkbox-container">
                <input type="checkbox" class="checkbox" onchange="toggleComplete(this, '${noteSection}')" ${checkedAttr}>
              </div>
              <textarea class="text-box ${completedClass}" placeholder="Type your objective here..." onchange="saveNotes('${noteSection}')">${note.text}</textarea>
              <button class="delete-btn" onclick="deleteRow(this, '${noteSection}')">Delete</button>
            `;
            container.appendChild(newRow);
          });
        }
      }

      // Load saved notes when page loads
      loadNotes('short');
      loadNotes('recurring');
      loadNotes('long');
    </script>
  </body>
</html>
