apiVersion: security.istio.io/v1beta1
kind: RequestAuthentication
metadata:
  name: zeebe-ra
spec:
  selector:
    matchLabels:
      app.kubernetes.io/component: zeebe-gateway
  jwtRules:
  - issuer: "http://camunda-keycloak.camunda.svc.cluster.local/auth/realms/camunda-platform"
    jwks: |
      {"keys":[{"kid":"YtL8Pk52T_7hPD9Lx8akoaBSPuOqxOjNjqhMCRPgkXc","kty":"RSA","alg":"RS256","use":"enc","n":"vl7RV6ys_OBlsDcxXOXWKrniXq507N36q42472Ya8ikGAIaIFDcOWxx0bqdG75FCPOQ06ihh5HgJ6GwiOQCpMVJQiz2slbPR_I_Sqr5OMElYZlLu9GG9FbsOa-8YGny-4_kJ4aJKyfNy5HBIJ57hWVyFjdr-gsaMBaN1LSTs3xc5msGTyJ35YjzygHpfmQZ2OuZoAX5iw9W3fT1xcI2c9KDAPjEoag-IEJuagal2k73teaz3Add8zHsVOWU_FRtprNBL9HgYPVantY9In6ON1s_AoYgSOKaZQxD9VT0DDH37B7tszDwf747-Ym45IEMWHc3Cu9Trsnx0XP4c07iUIQ","e":"AQAB","x5c":["MIICrzCCAZcCBgGGniXgxTANBgkqhkiG9w0BAQsFADAbMRkwFwYDVQQDDBBjYW11bmRhLXBsYXRmb3JtMB4XDTIzMDMwMTE3MDcwN1oXDTMzMDMwMTE3MDg0N1owGzEZMBcGA1UEAwwQY2FtdW5kYS1wbGF0Zm9ybTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAL5e0VesrPzgZbA3MVzl1iq54l6udOzd+quNuO9mGvIpBgCGiBQ3DlscdG6nRu+RQjzkNOooYeR4CehsIjkAqTFSUIs9rJWz0fyP0qq+TjBJWGZS7vRhvRW7DmvvGBp8vuP5CeGiSsnzcuRwSCee4VlchY3a/oLGjAWjdS0k7N8XOZrBk8id+WI88oB6X5kGdjrmaAF+YsPVt309cXCNnPSgwD4xKGoPiBCbmoGpdpO97Xms9wHXfMx7FTllPxUbaazQS/R4GD1Wp7WPSJ+jjdbPwKGIEjimmUMQ/VU9Awx9+we7bMw8H++O/mJuOSBDFh3NwrvU67J8dFz+HNO4lCECAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAbj2gwiTGgK/AfY5MIel5vLxp8DpGSxg3FQepHntP6Ad4b5fjS00hsQ/9maHh8SCQWtrao1C/d6rENvDIlOQVTXHZuy8aS1gmXgGSEGFwevYL7O+rbSrhzDhnDE5lSRkVQ/HhrWQ2Zwij5ah9bBYp4ILPwnyH2Y4EQ8k0tyKZ/V2Vnb5Y54jpzj+GVXipXxyWl/tdq1/FZtyIzfrPzX/B3NsDtk0613m5L8Os9Vm2ulwSZELGjQzKCpu6hMlL6bQ3nrmq4D46pihZFGtJZMGfK/UNVER3qgpeIOYUZtUDPoMI+NJqlrMERoMxIGfILcIlwiOvwL72XgOPWNZKBDZ8Sg=="],"x5t":"3eM0xdOy_KluVArX-8vsuBIfUmg","x5t#S256":"PaSUZJuJYFXz-LrY0HMiwaw9supN4GNjLLBOzNPzLW8"},{"kid":"P0QJVK4fHDGfCZTOAHSoPJTd2qLY4yM7sQOSkjf6V74","kty":"RSA","alg":"RS256","use":"sig","n":"rXIcV9yKgsz3oq4exM_u3KWjt2a18yrkJNfhb4-9BiR2DtJ-waGrvLRT5NWcZpeAGBGcCTjYAYu4lQg8ICHdmxWIfqFHuYpRa3fDyzFVpGh5gp_2l5i1czzJoY2uQ5XIuJFIzMTxx0PtROOrzrcAy8WIA1sSK-Z53mV4UygDQgyRWQTaa2IEyX7jdhL0kkG5NvgenFNZ2DC_5tq-2OMBlpWDJ8AZFsp2Kg6nTC8ULcLkuvmGr4zxlzCNd_J054eSTJ-3_EUrlxYH4Dq01XOZHHQkrFxx8M9QWP-jgNOk5W09mq-X2exoHQM9Vyu0Oc5SolKeM8C4e_Jd2StFVE3Bcw","e":"AQAB","x5c":["MIICrzCCAZcCBgGGniXhGDANBgkqhkiG9w0BAQsFADAbMRkwFwYDVQQDDBBjYW11bmRhLXBsYXRmb3JtMB4XDTIzMDMwMTE3MDcwOFoXDTMzMDMwMTE3MDg0OFowGzEZMBcGA1UEAwwQY2FtdW5kYS1wbGF0Zm9ybTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAK1yHFfcioLM96KuHsTP7tylo7dmtfMq5CTX4W+PvQYkdg7SfsGhq7y0U+TVnGaXgBgRnAk42AGLuJUIPCAh3ZsViH6hR7mKUWt3w8sxVaRoeYKf9peYtXM8yaGNrkOVyLiRSMzE8cdD7UTjq863AMvFiANbEivmed5leFMoA0IMkVkE2mtiBMl+43YS9JJBuTb4HpxTWdgwv+bavtjjAZaVgyfAGRbKdioOp0wvFC3C5Lr5hq+M8ZcwjXfydOeHkkyft/xFK5cWB+A6tNVzmRx0JKxccfDPUFj/o4DTpOVtPZqvl9nsaB0DPVcrtDnOUqJSnjPAuHvyXdkrRVRNwXMCAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAJboIgkvwJSF1nhAaT+eh++DQAO1JwLeQ984S9i6gWH9c6IjFhp1lcW2sjm5w/2MoEyjbe+QTJ+R7YlVsew3dc+kVJ/I9I9EKrtoKUAsJyIX5vJI1gNn9b2R2UOdYzSfBpcDaQZtOnXl47Wl8gkMEVUhnsXE39ELrFlOahbEmslTKmHGnXNM+JFjn9saA5BxOgEo38RLgsOV3QYWtD144zIJ2yRG/aLSv0O/Rr/ippQFLExqFH44WFBViOw+CT/k/3m/in0XihcLJ2urkMqauzv5i9T4ZzTg9u5LOm9d5LDMlGI0JWZDfnpbe/uWs1fBWnp5WQEy+JzYOC8FeEt0jHQ=="],"x5t":"5bTNCmy87sNIPiBuTokO0MN-g5A","x5t#S256":"OOFqU4fmuWV1ZofSUt0iZ3L45d1NaMSb1OeurtDMbhE"}]}
    forwardOriginalToken: true
---
apiVersion: security.istio.io/v1beta1
kind: AuthorizationPolicy
metadata:
  name: zeebe-ap
spec:
  selector:
    matchLabels:
      app.kubernetes.io/component: zeebe-gateway
  rules:
  - from:
    - source:
        requestPrincipals: ["*"]
    - source:
        namespaces: ["camunda"]
